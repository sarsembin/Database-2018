CREATE DATABASE LAB2
CREATE TABLE COUNTRIES (
	COUNTRY_ID SERIAL PRIMARY KEY,
	COUNTRY_NAME VARCHAR(100),
	REGION_ID INTEGER,
	POPULATION INTEGER
);
INSERT INTO COUNTRIES (COUNTRY_NAME, REGION_ID, POPULATION) VALUES ('Kazahia', 1, 17000000)
INSERT INTO COUNTRIES (COUNTRY_ID, COUNTRY_NAME) VALUES (2, 'Bergastan')
INSERT INTO COUNTRIES (COUNTRY_NAME, REGION_ID, POPULATION) VALUES ('KeKistan', NULL, 4000000)
INSERT INTO COUNTRIES (COUNTRY_NAME, REGION_ID, POPULATION) VALUES ('Kongo', 65, 600000), 
('Tanzania', 54, 1234567), ('Roflostan', 69, 228322)
ALTER TABLE COUNTRIES ALTER COLUMN COUNTRY_NAME SET DEFAULT 'Kazahstan'
INSERT INTO COUNTRIES (COUNTRY_NAME) VALUES (DEFAULT)
INSERT INTO COUNTRIES DEFAULT VALUES
CREATE TABLE COUNTRIES_NEW (LIKE COUNTRIES INCLUDING DEFAULTS)
INSERT INTO COUNTRIES_NEW SELECT * FROM COUNTRIES
UPDATE COUNTRIES SET REGION_ID = 1 WHERE REGION_ID IS NULL 
UPDATE COUNTRIES SET POPULATION = POPULATION * 1.1 RETURNING COUNTRY_NAME, POPULATION AS NEW_POPULATION
DELETE FROM COUNTRIES POPULATION WHERE POPULATION < 100000
DELETE FROM COUNTRIES_NEW USING COUNTRIES WHERE COUNTRIES_NEW.COUNTRY_ID = COUNTRIES.COUNTRY_ID RETURNING *
DELETE FROM COUNTRIES RETURNING *

SELECT * FROM COUNTRIES